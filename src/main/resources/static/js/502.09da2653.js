"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[502],{360:function(t,e,a){a.d(e,{Z:function(){return d}});var n=a(3396);const s={class:"pagination"},i={class:"overflow-auto"},o={class:"mt-3"};function r(t,e,a,r,l,c){const u=(0,n.up)("b-pagination"),d=(0,n.up)("b-card");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(d,{style:{"justify-content":"center"}},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n._)("div",o,[(0,n.Wm)(u,{modelValue:t.ex4CurrentPage,"onUpdate:modelValue":e[0]||(e[0]=e=>t.ex4CurrentPage=e),pills:"","total-rows":t.ex4Rows,onPageClick:c.pageClick,"per-page":t.perPage,currPage:a.currPage},null,8,["modelValue","total-rows","onPageClick","per-page","currPage"])])])])),_:1}),(0,n.WI)(t.$slots,"default")])}var l={props:{pageListItem:Number,pageTotal:Number,currPage:{type:Number,default:1}},data:function(){return{ex4CurrentPage:this.currPage,ex4Rows:this.pageTotal,perPage:this.pageListItem}},created(){console.log(this.currPage)},methods:{pageClick:function(t,e){this.ex4CurrentPage=e,this.$emit("pageCurrent",this.ex4CurrentPage)}}},c=a(89);const u=(0,c.Z)(l,[["render",r]]);var d=u},7672:function(t,e,a){a.r(e),a.d(e,{default:function(){return V}});var n=a(3396),s=a(7139),i=a(9242);const o={class:"margincustom margintpcust"},r={class:"margincustom"},l={class:"margincustom"},c={style:{"font-size":"13px"}},u=(0,n.Uk)(),d={style:{"font-size":"13px",color:"gray"}},h={class:"margincustom"},p={class:"d-flex row"},m={class:"col-md-8"},g={class:"d-flex flex-column comment-section"},_={class:"d-flex flex-column justify-content-start ml-2"},k={class:"d-block font-weight-bold name"},w={class:"date text-black-50"},f={class:"mt-2"},C={key:0,class:"comment-text"},y={key:1,class:"d-flex flex-row align-items-start"},x=["onUpdate:modelValue"],b=["onClick"],v=["onClick"],I=["onClick"],P={class:"bg-light p-2"},$={class:"d-flex flex-row align-items-start"};function B(t,e,a,B,T,z){const D=(0,n.up)("ToastViewer"),A=(0,n.up)("Pagination"),S=(0,n.up)("BlackBg");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",o,[(0,n._)("h2",null,(0,s.zw)(t.title),1)]),(0,n._)("div",r," 도시명 :"+(0,s.zw)(t.city),1),(0,n._)("div",l,[(0,n._)("span",c,"등록일 : "+(0,s.zw)(t.created_at),1),u,(0,n._)("span",d,"조회수:"+(0,s.zw)(t.read_count),1)]),t.detail_viewer?((0,n.wg)(),(0,n.j4)(D,{key:0,content:t.content},null,8,["content"])):(0,n.kq)("",!0),(0,n._)("div",h,[(0,n._)("div",p,[(0,n._)("div",m,[(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.reply,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"bg-white p-2",key:a},[(0,n._)("div",_,[(0,n._)("span",k,(0,s.zw)(e.nickname),1),(0,n._)("span",w,(0,s.zw)(e.created_at),1)]),(0,n._)("div",f,[e.upd_chk?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",C,(0,s.zw)(e.content),1)),e.upd_chk?((0,n.wg)(),(0,n.iD)("div",y,[(0,n.wy)((0,n._)("textarea",{class:"form-control ml-1 shadow-none textarea","onUpdate:modelValue":e=>t.form.new_content[a]=e},null,8,x),[[i.nr,t.form.new_content[a]]]),(0,n._)("button",{class:"btn-cl-cus",onClick:t=>z.comment_upd_db(e.id,a)},"수정",8,b)])):(0,n.kq)("",!0)]),e.auth?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn-cl-cus-upd",onClick:t=>z.comment_upd(a)},"수정",8,v)):(0,n.kq)("",!0),e.auth?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn-cl-cus-del",onClick:t=>z.comment_del(e.id)},"삭제",8,I)):(0,n.kq)("",!0)])))),128)),t.pageChk?((0,n.wg)(),(0,n.j4)(A,{key:0,pageListItem:t.pageListItem,onPageCurrent:z.pageCurr,pageTotal:t.pageTotal},null,8,["pageListItem","onPageCurrent","pageTotal"])):(0,n.kq)("",!0),(0,n._)("div",P,[(0,n._)("div",$,[(0,n.wy)((0,n._)("textarea",{class:"form-control ml-1 shadow-none textarea","onUpdate:modelValue":e[0]||(e[0]=e=>t.comment_reply_ins=e)},null,512),[[i.nr,t.comment_reply_ins]]),(0,n._)("button",{class:"btn-cl-cus",onClick:e[1]||(e[1]=e=>z.comment_ins(t.tourId))},"등록")])])])])])]),t.loading?((0,n.wg)(),(0,n.j4)(S,{key:1})):(0,n.kq)("",!0)],64)}var T=a(5065),z=a(5033),D=a(360),A={data:function(){return{tourId:0,contentType:"",tourDetail:this.$route.query.sn,contentChange:[],reply:[],loading:!1,comment_reply_ins:"",pageListItem:8,page:0,pageTotal:0,pageChk:!1,form:{new_content:[]},content:"",title:"",nickname:"",read_count:"",created_at:"",auth_article:"",detail_viewer:!1,city:""}},components:{ToastViewer:T.Z,BlackBg:z.Z,Pagination:D.Z},created(){this.tourId=Number(this.tourDetail),this.contentType="tour",this.init()},methods:{init(){this.comment_detail(),this.tourDetailAxios()},comment_detail(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};let e={page:this.page};this.loading=!0,this.reply=[],this.$axios.get("/api/trip/tour/comment/"+this.tourId,1==this.$tokenCheck()?{headers:t,params:e}:{params:e}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.pageTotal=t.data.result.totalElements,t.data.result.content.forEach((t=>{let e=[];e.nickname=t.nickName,e.created_at=this.$splitDateHyphenTime(t.createdAt),e.content=t.content,e.auth=t.authChk,e.id=t.id,e.upd_chk=!1,this.reply.push(e)})),0==this.pageTotal?this.pageChk=!1:this.pageChk=!0)})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},tourDetailAxios(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/trip/tour/"+this.tourId,1==this.$tokenCheck()?{headers:t}:"").then((t=>{"SUCCESS"==t.data.resultCode&&(this.content=t.data.result.content,this.title=t.data.result.title,this.city=t.data.result.city,this.read_count=t.data.result.readCount,this.created_at=t.data.result.createdAt.substr(0,4)+"."+t.data.result.createdAt.substr(5,2)+"."+t.data.result.createdAt.substr(8,2))})).catch((()=>{history.back(-1)})).finally((()=>{this.detail_viewer=!0}))},comment_ins(t){if(this.$tokenCheck()){if(""==this.comment_reply_ins)return void this.$swal("","댓글을 입력해주세요.","warning");const e={Authorization:"Bearer "+sessionStorage.getItem("token")};let a={tourId:t,content:this.comment_reply_ins};this.loading=!0,this.$axios.post("/api/trip/tour/comment/new",a,{headers:e}).then((()=>{this.comment_reply_ins="",this.pageChk=!1,this.init()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}else this.$router.push("/login")},pageCurr(t){this.page=t-1,this.comment_detail()},comment_upd(t){this.reply[t].upd_chk=!this.reply[t].upd_chk,this.reply[t].upd_chk&&(this.form.new_content[t]=this.reply[t].content)},comment_upd_db(t,e){const a={Authorization:"Bearer "+sessionStorage.getItem("token")};let n={tourId:this.tourId,content:this.form.new_content[e]};this.loading=!0,this.$axios.put("/api/trip/tour/comment/"+t+"/form",n,{headers:a}).then((()=>{this.page=0,this.pageChk=!1,this.comment_detail()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},comment_del(t){this.$swal.fire({title:"삭제 하시겠습니까?",text:"다시 되돌릴 수 없습니다.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"확인",cancelButtonText:"취소",reverseButtons:!0}).then((e=>{if(e.isConfirmed){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.put("/api/trip/tour/comment/"+t+"/delete",null,{headers:e}).then((()=>{this.page=0,this.pageChk=!1,this.init()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}}))}}},S=a(89);const q=(0,S.Z)(A,[["render",B],["__scopeId","data-v-661c4ae8"]]);var V=q}}]);
//# sourceMappingURL=502.09da2653.js.map