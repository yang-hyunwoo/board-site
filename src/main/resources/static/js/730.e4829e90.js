"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[730],{5033:function(e,t,s){s.d(t,{Z:function(){return c}});var a=s(3396);const i=(0,a._)("div",{class:"customdis"},[(0,a._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,a._)("span",{class:"visually-hidden"},"Loading...")])],-1),l=[i];function n(e,t,s,i,n,r){return(0,a.wg)(),(0,a.iD)("div",{class:"black-bg",onClick:t[0]||(t[0]=t=>e.$emit("close"))},l)}var r={},o=s(89);const d=(0,o.Z)(r,[["render",n]]);var c=d},4730:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var a=s(3396),i=s(7139),l=s(9242);const n=e=>((0,a.dD)("data-v-41b0e4ce"),e=e(),(0,a.Cn)(),e),r={class:"container"},o={class:"row"},d={class:"col-md-12"},c={class:"container"},h={class:"row"},u={class:"col-md-12"},p={id:"content",class:"content content-full-width"},m={class:"profile"},g={class:"profile-header"},_=n((()=>(0,a._)("div",{class:"profile-header-cover"},null,-1))),f={class:"profile-header-content"},b={class:"profile-header-img"},w=["src"],y={class:"profile-header-info"},k={class:"m-t-10 m-b-5"},v={class:"m-b-10"},C=n((()=>(0,a._)("label",{class:"file-label",for:"chooseFile"},"프로필 변경",-1))),$={class:"profile-content"},U={class:"tab-content p-0"},x={class:"tab-pane fade in active show",id:"profile-about"},I={class:"table-responsive"},S={class:"table table-profile"},B=n((()=>(0,a._)("thead",null,null,-1))),D={class:"highlight"},V=n((()=>(0,a._)("td",{class:"field"},"닉네임",-1))),q={class:"highlight"},z=n((()=>(0,a._)("td",{class:"field"},"휴대폰",-1))),F={key:0,class:"highlight"},N=n((()=>(0,a._)("td",{class:"field"},"비밀번호",-1))),j=(0,a.Uk)(" *비밀번호는 따로 저장 버튼을 눌러야 변경 가능 합니다."),M={class:"highlight"},T=n((()=>(0,a._)("td",{class:"field"},"성별",-1))),Z=n((()=>(0,a._)("label",{class:"form-check-label",for:"credit",style:{"margin-right":"1rem"}},"남자",-1))),A=n((()=>(0,a._)("label",{class:"form-check-label",for:"debit"},"여자",-1))),E={style:{display:"flex","justify-content":"end"}};function G(e,t,s,n,G,L){const P=(0,a.up)("BlackBg");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",o,[(0,a._)("div",d,[(0,a._)("div",c,[(0,a._)("div",h,[(0,a._)("div",u,[(0,a._)("div",p,[(0,a._)("div",m,[(0,a._)("div",g,[_,(0,a._)("div",f,[(0,a._)("div",b,[e.img_real?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.img,style:{width:"100%",height:"100%"}},null,8,w)):(0,a.kq)("",!0)]),(0,a._)("div",y,[(0,a._)("h4",k,(0,i.zw)(e.user_name),1),(0,a._)("p",v,(0,i.zw)(e.user_email),1),C,(0,a._)("input",{class:"file",id:"chooseFile",type:"file",onClick:t[0]||(t[0]=(...e)=>L.resetImageUploader&&L.resetImageUploader(...e)),onChange:t[1]||(t[1]=(...e)=>L.upload&&L.upload(...e)),accept:"image/png, image/jpeg, image/gif",ref:"imageUploader"},null,544)])])])]),(0,a._)("div",$,[(0,a._)("div",U,[(0,a._)("div",x,[(0,a._)("div",I,[(0,a._)("table",S,[B,(0,a._)("tbody",null,[(0,a._)("tr",D,[V,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text",style:{margin:"1px"},"onUpdate:modelValue":t[2]||(t[2]=t=>e.user_nickname=t)},null,512),[[l.nr,e.user_nickname]])])]),(0,a._)("tr",q,[z,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"text",style:{margin:"1px"},"onUpdate:modelValue":t[3]||(t[3]=t=>e.phone_number=t)},null,512),[[l.nr,e.phone_number]])])]),""==e.loginType?((0,a.wg)(),(0,a.iD)("tr",F,[N,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"password",style:{margin:"1px"},"onUpdate:modelValue":t[4]||(t[4]=t=>e.user_password=t)},null,512),[[l.nr,e.user_password]]),(0,a._)("button",{class:"btn btn-primary",style:{"margin-left":"1rem"},onClick:t[5]||(t[5]=(...e)=>L.passwordClick&&L.passwordClick(...e))},"저장"),j])])):(0,a.kq)("",!0),(0,a._)("tr",M,[T,(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{id:"credit",name:"paymentMethod",type:"radio",class:"form-check-input",required:"",value:"M","onUpdate:modelValue":t[6]||(t[6]=t=>e.gender=t)},null,512),[[l.G2,e.gender]]),Z,(0,a.wy)((0,a._)("input",{id:"debit",name:"paymentMethod",type:"radio",class:"form-check-input",required:"",value:"F","onUpdate:modelValue":t[7]||(t[7]=t=>e.gender=t)},null,512),[[l.G2,e.gender]]),A])])])])]),(0,a._)("div",E,[(0,a._)("button",{class:"btn btn-primary width-150",onClick:t[8]||(t[8]=(...e)=>L.userUpd&&L.userUpd(...e))},"수정"),(0,a._)("button",{class:"btn btn-white btn-white-without-border width-150 m-l-5",onClick:t[9]||(t[9]=(...e)=>L.cancle&&L.cancle(...e))},"취소")])])])])])])])])])])]),e.loading?((0,a.wg)(),(0,a.j4)(P,{key:0})):(0,a.kq)("",!0)],64)}var L=s(5033),P={components:{BlackBg:L.Z},data:function(){return{loading:!1,user_name:"",user_email:"",user_nickname:"",phone_number:"",gender:"",img_real:!1,img:"",img_id:"",user_password:"",loginType:""}},created(){this.init()},methods:{init(){this.myPage()},myPage(){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.get("/api/trip/users/my-page",{headers:e}).then((t=>{console.log(t),"SUCCESS"==t.data.resultCode&&(this.loginType=t.data.result.loginType,this.user_name=t.data.result.name,this.user_email=t.data.result.email,this.user_nickname=t.data.result.nickName,this.phone_number=t.data.result.phoneNumber,this.gender=t.data.result.gender,null==t.data.result.profileId||""==t.data.result.profileId?this.img_real=!1:this.img_real=!0,this.img_id=t.data.result.profileId,this.img_real&&this.$axios.get("/api/common/image/"+t.data.result.profileId+"/1",{headers:e}).then((e=>{this.img=e.data})).catch((()=>{})).finally((()=>{})))})).catch((()=>{})).finally((()=>{this.loading=!1}))},passwordClick(){if(!this.pw_chk(this.user_password))return this.$swal("","하나 이상의 문자 , 숫자 , 특수 문자,최소 8자의 비밀번호가 필요합니다.","warning"),!1;let e={password:this.user_password};const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.post("/api/trip/users/change/password",e,{headers:t}).then((e=>{"SUCCESS"==e.data.resultCode&&this.$swal("","저장되었습니다.","success")})).catch((e=>{this.$swal("",e.response.data.result,"error")})).finally((()=>{this.loading=!1}))},pw_chk(e){return this.$passwordValidation(e)},resetImageUploader(){this.$refs.imageUploader.value=""},userUpd(){if(console.log(this.img_id),this.$emptyChk(this.user_nickname))return this.$swal("","닉네임을 확인해주세요.","warning"),!1;if(this.$emptyChk(this.phone_number))return this.$swal("","휴대번호를 확인해주세요.","warning"),!1;if(this.$emptyChk(this.gender))return this.$swal("","성별을 확인해주세요.","warning"),!1;const e={Authorization:"Bearer "+sessionStorage.getItem("token")};let t={nickName:this.user_nickname,phoneNumber:this.phone_number,gender:this.gender,profileId:this.img_id};this.$axios.post("/api/trip/users/change/other",t,{headers:e}).then((e=>{"SUCCESS"==e.data.resultCode&&this.$swal("","저장되었습니다.","success")})).catch((e=>{this.$swal("",e.response.data.result,"error")})).finally((()=>{this.loading=!1,this.myPage()}))},cancle(){this.$router.push("/")},upload(e){const t=e.target.files[0];URL.createObjectURL(t);const s={"content-type":"multipart/form-data"},a=new FormData;a.append("multiFile",t),this.$axios.post("/api/common/file-upload",a,{headers:s}).then((e=>{this.img_id=e.data[0].fileId,this.$axios.get("/api/common/image/"+this.img_id+"/1",{headers:s}).then((e=>{this.img=e.data})).catch((()=>{})).finally((()=>{}))})).catch((()=>{})).finally((()=>{}))}},watch:{phone_number(){this.phone_number=this.phone_number.replace(/[^0-9]/g,""),this.phone_number=this.$phoneNumberGetMask(this.phone_number)}}},R=s(89);const H=(0,R.Z)(P,[["render",G],["__scopeId","data-v-41b0e4ce"]]);var O=H}}]);
//# sourceMappingURL=730.e4829e90.js.map