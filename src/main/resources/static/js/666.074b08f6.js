"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[666],{233:function(t,e,a){a.r(e),a.d(e,{default:function(){return V}});var i=a(3396),n=a(7139),s=a(9242);const o={key:0,class:"custom-div"},l={class:"margincustom margintpcust"},r={class:"margincustom"},c={class:"margincustom"},u={style:{"font-size":"13px"}},d=(0,i.Uk)(),h={style:{"font-size":"13px",color:"gray"}},p={class:"margincustom"},m={class:"d-flex row"},g={class:""},_={class:"d-flex flex-column comment-section"},k={class:"d-flex flex-column justify-content-start ml-2"},f={class:"d-block font-weight-bold name"},w={class:"date text-black-50"},C={class:"mt-2"},y={key:0,class:"comment-text"},x={key:1,class:"d-flex flex-row align-items-start"},b=["onUpdate:modelValue"],v=["onClick"],I=["onClick"],$=["onClick"],B={class:"bg-light p-2"},P={class:"d-flex flex-row align-items-start"};function T(t,e,a,T,z,S){const D=(0,i.up)("ToastViewer"),A=(0,i.up)("Pagination"),q=(0,i.up)("BlackBg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[t.auth_article?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("button",{class:"btn-cl-cus-upd",onClick:e[0]||(e[0]=(...t)=>S.upd_click&&S.upd_click(...t))},"수정"),(0,i._)("button",{class:"btn-cl-cus-del",onClick:e[1]||(e[1]=(...t)=>S.delete_click&&S.delete_click(...t))},"삭제")])):(0,i.kq)("",!0),(0,i._)("div",l,[(0,i._)("h2",null,(0,n.zw)(t.title),1)]),(0,i._)("div",r,(0,n.zw)(t.nickname),1),(0,i._)("div",c,[(0,i._)("span",u,"등록일 : "+(0,n.zw)(t.created_at),1),d,(0,i._)("span",h,"조회수:"+(0,n.zw)(t.read_count),1)]),t.detail_viewer?((0,i.wg)(),(0,i.j4)(D,{key:1,content:t.content},null,8,["content"])):(0,i.kq)("",!0),(0,i._)("div",p,[(0,i._)("div",m,[(0,i._)("div",g,[(0,i._)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.reply,((e,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"bg-white p-2",key:a},[(0,i._)("div",k,[(0,i._)("span",f,(0,n.zw)(e.nickname),1),(0,i._)("span",w,(0,n.zw)(e.created_at),1)]),(0,i._)("div",C,[e.upd_chk?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",y,(0,n.zw)(e.content),1)),e.upd_chk?((0,i.wg)(),(0,i.iD)("div",x,[(0,i.wy)((0,i._)("textarea",{class:"form-control ml-1 shadow-none textarea","onUpdate:modelValue":e=>t.form.new_content[a]=e},null,8,b),[[s.nr,t.form.new_content[a]]]),(0,i._)("button",{class:"btn-cl-cus",onClick:t=>S.comment_upd_db(e.id,a)},"수정",8,v)])):(0,i.kq)("",!0)]),e.auth?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn-cl-cus-upd",onClick:t=>S.comment_upd(a)},"수정",8,I)):(0,i.kq)("",!0),e.auth?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn-cl-cus-del",onClick:t=>S.comment_del(e.id)},"삭제",8,$)):(0,i.kq)("",!0)])))),128)),t.pageChk?((0,i.wg)(),(0,i.j4)(A,{key:0,pageListItem:t.pageListItem,onPageCurrent:S.pageCurr,pageTotal:t.pageTotal},null,8,["pageListItem","onPageCurrent","pageTotal"])):(0,i.kq)("",!0),(0,i._)("div",B,[(0,i._)("div",P,[(0,i.wy)((0,i._)("textarea",{class:"form-control ml-1 shadow-none textarea","onUpdate:modelValue":e[2]||(e[2]=e=>t.comment_reply_ins=e)},null,512),[[s.nr,t.comment_reply_ins]]),(0,i._)("button",{class:"btn-cl-cus",onClick:e[3]||(e[3]=e=>S.comment_ins(t.articleId))},"등록")])])])])])]),t.loading?((0,i.wg)(),(0,i.j4)(q,{key:2})):(0,i.kq)("",!0)],64)}var z=a(5065),S=a(5033),D=a(360),A={data:function(){return{articleId:0,contentType:"",articleDetail:this.$route.query.sn,contentChange:[],reply:[],loading:!1,comment_reply_ins:"",pageListItem:8,page:0,pageTotal:0,pageChk:!1,form:{new_content:[]},content:"",title:"",nickname:"",read_count:"",created_at:"",auth_article:"",detail_viewer:!1}},components:{ToastViewer:z.Z,BlackBg:S.Z,Pagination:D.Z},created(){this.articleId=Number(this.articleDetail),this.contentType="article",this.init()},methods:{init(){this.comment_detail(),this.articleDetailAxios()},comment_detail(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};let e={page:this.page};this.loading=!0,this.reply=[],this.$axios.get("/api/trip/articles/comment/"+this.articleId,1==this.$tokenCheck()?{headers:t,params:e}:{params:e}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.pageTotal=t.data.result.totalElements,t.data.result.content.forEach((t=>{let e=[];e.nickname=t.nickName,e.created_at=this.$splitDateHyphenTime(t.createdAt),e.content=t.content,e.auth=t.authChk,e.id=t.id,e.upd_chk=!1,this.reply.push(e)})),0==this.pageTotal?this.pageChk=!1:this.pageChk=!0)})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},articleDetailAxios(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/trip/articles/"+this.articleId,1==this.$tokenCheck()?{headers:t}:"").then((t=>{"SUCCESS"==t.data.resultCode&&(console.log(t.data.result.title),this.content=t.data.result.content,this.title=t.data.result.title,this.nickname=t.data.result.nickName,this.read_count=t.data.result.readCount,this.created_at=t.data.result.createdAt.substr(0,4)+"."+t.data.result.createdAt.substr(5,2)+"."+t.data.result.createdAt.substr(8,2),this.auth_article=t.data.result.authChk)})).catch((()=>{history.back(-1)})).finally((()=>{this.detail_viewer=!0}))},comment_ins(t){if(this.$tokenCheck()){if(""==this.comment_reply_ins)return void this.$swal("","댓글을 입력해주세요.","warning");const e={Authorization:"Bearer "+sessionStorage.getItem("token")};let a={articleId:t,content:this.comment_reply_ins};this.loading=!0,this.$axios.post("/api/trip/articles/comment/new",a,{headers:e}).then((()=>{this.comment_reply_ins="",this.pageChk=!1,this.init()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}else this.$router.push("/login")},pageCurr(t){this.page=t-1,this.comment_detail()},comment_upd(t){this.reply[t].upd_chk=!this.reply[t].upd_chk,this.reply[t].upd_chk&&(this.form.new_content[t]=this.reply[t].content)},comment_upd_db(t,e){const a={Authorization:"Bearer "+sessionStorage.getItem("token")};let i={articleId:this.articleId,content:this.form.new_content[e]};this.loading=!0,this.$axios.put("/api/trip/articles/comment/"+t+"/form",i,{headers:a}).then((()=>{this.page=0,this.pageChk=!1,this.comment_detail()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))},comment_del(t){this.$swal.fire({title:"삭제 하시겠습니까?",text:"다시 되돌릴 수 없습니다.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"확인",cancelButtonText:"취소",reverseButtons:!0}).then((e=>{if(e.isConfirmed){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.put("/api/trip/articles/comment/"+t+"/delete",null,{headers:e}).then((()=>{this.page=0,this.pageChk=!1,this.init()})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}}))},upd_click(){this.$router.push({path:"/articleModify",name:"articleModify",query:{sn:this.articleId}})},delete_click(){this.$swal.fire({title:"삭제 하시겠습니까?",text:"다시 되돌릴 수 없습니다.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"확인",cancelButtonText:"취소",reverseButtons:!0}).then((t=>{if(t.isConfirmed){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.put("/api/trip/articles/"+this.articleId+"/delete",null,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.$swal("","삭제되었습니다.","success"),this.$router.push("/article"))})).catch((()=>{history.back(-1)})).finally((()=>{}))}}))}}},q=a(89);const U=(0,q.Z)(A,[["render",T],["__scopeId","data-v-0215ffd2"]]);var V=U},360:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(3396);const n={class:"pagination"},s={class:"overflow-auto"},o={class:"mt-3"};function l(t,e,a,l,r,c){const u=(0,i.up)("b-pagination"),d=(0,i.up)("b-card");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(d,{style:{"justify-content":"center"}},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i._)("div",o,[(0,i.Wm)(u,{modelValue:t.ex4CurrentPage,"onUpdate:modelValue":e[0]||(e[0]=e=>t.ex4CurrentPage=e),pills:"","total-rows":t.ex4Rows,onPageClick:c.pageClick,"per-page":t.perPage,currPage:a.currPage},null,8,["modelValue","total-rows","onPageClick","per-page","currPage"])])])])),_:1}),(0,i.WI)(t.$slots,"default")])}var r={props:{pageListItem:Number,pageTotal:Number,currPage:{type:Number,default:1}},data:function(){return{ex4CurrentPage:this.currPage,ex4Rows:this.pageTotal,perPage:this.pageListItem}},created(){console.log(this.currPage)},methods:{pageClick:function(t,e){this.ex4CurrentPage=e,this.$emit("pageCurrent",this.ex4CurrentPage)}}},c=a(89);const u=(0,c.Z)(r,[["render",l]]);var d=u}}]);
//# sourceMappingURL=666.074b08f6.js.map