"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[70],{360:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(3396);const s={class:"pagination"},i={class:"overflow-auto"},r={class:"mt-3"};function n(e,t,a,n,o,c){const h=(0,l.up)("b-pagination"),u=(0,l.up)("b-card");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(u,{style:{"justify-content":"center"}},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",r,[(0,l.Wm)(h,{modelValue:e.ex4CurrentPage,"onUpdate:modelValue":t[0]||(t[0]=t=>e.ex4CurrentPage=t),pills:"","total-rows":e.ex4Rows,onPageClick:c.pageClick,"per-page":e.perPage,currPage:a.currPage},null,8,["modelValue","total-rows","onPageClick","per-page","currPage"])])])])),_:1}),(0,l.WI)(e.$slots,"default")])}var o={props:{pageListItem:Number,pageTotal:Number,currPage:{type:Number,default:1}},data:function(){return{ex4CurrentPage:this.currPage,ex4Rows:this.pageTotal,perPage:this.pageListItem}},created(){console.log(this.currPage)},methods:{pageClick:function(e,t){this.ex4CurrentPage=t,this.$emit("pageCurrent",this.ex4CurrentPage)}}},c=a(89);const h=(0,c.Z)(o,[["render",n]]);var u=h},5033:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(3396);const s=(0,l._)("div",{class:"customdis"},[(0,l._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")])],-1),i=[s];function r(e,t,a,s,r,n){return(0,l.wg)(),(0,l.iD)("div",{class:"black-bg",onClick:t[0]||(t[0]=t=>e.$emit("close"))},i)}var n={},o=a(89);const c=(0,o.Z)(n,[["render",r]]);var h=c},1070:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var l=a(3396),s=a(9242),i=a(7139);const r={class:"py-5 text-center container"},n={class:"row py-5"},o={class:"col-lg-12 mx-auto"},c={class:"text-white p-5 shadow-sm rounded banner"},h=(0,l._)("h1",{class:"display-4"},"여행 리스트",-1),u=(0,l._)("p",{class:"lead"},"나에게 맞는 여행을 찾아보세요",-1),d={class:"album py-5 bg-light"},g={class:"container"},p={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},m=["onClick"],_={class:"card shadow-sm"},v={key:0,class:"bd-placeholder-img card-img-top",width:"100%",height:"225",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Placeholder: Thumbnail",preserveAspectRatio:"xMidYMid slice",focusable:"false"},k=(0,l._)("title",null,"Placeholder",-1),w=(0,l._)("rect",{width:"100%",height:"100%",fill:"#55595c"},null,-1),y=[k,w],f=["src"],C={class:"card-body"},b={class:"card-text"},x={class:"d-flex justify-content-between align-items-center"},P={class:"btn-group"},S={class:"text-muted"},D=["src","onClick"],$=["src","onClick"],z={class:"text-muted"},L={class:"text-muted"},T=(0,l.Uk)("가격:"),B={class:"deco"},I=(0,l.Uk)(),q={style:{color:"red"}};function U(e,t,a,k,w,U){const Z=(0,l.up)("BlackBg"),A=(0,l.up)("Pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("section",r,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("div",c,[h,u,(0,l.wy)((0,l._)("input",{class:"form-control mr-sm-2 custombar",type:"search",placeholder:"제목을 입력해주세요.","aria-label":"Search","onUpdate:modelValue":t[0]||(t[0]=t=>e.travel_title=t),onKeyup:t[1]||(t[1]=(0,s.D2)(((...e)=>U.travelSearch&&U.travelSearch(...e)),["enter"]))},null,544),[[s.nr,e.travel_title]]),(0,l._)("button",{class:"btn btn-outline-success my-2 my-sm-0",style:{"margin-left":"1rem"},onClick:t[2]||(t[2]=(...e)=>U.travelSearch&&U.travelSearch(...e))},"Search")])])])]),(0,l._)("div",d,[(0,l._)("div",g,[(0,l._)("div",p,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.travel_list,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"col curcus",key:a,onClick:e=>U.todoCclick(t.id)},[(0,l._)("div",_,[t.img_chk?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("svg",v,y)),t.img_chk?((0,l.wg)(),(0,l.iD)("img",{key:1,src:t.img,class:"bd-placeholder-img card-img-top",width:"100%",height:"225"},null,8,f)):(0,l.kq)("",!0),(0,l._)("div",C,[(0,l._)("p",b,(0,i.zw)(t.title),1),(0,l._)("div",x,[(0,l._)("div",P,[(0,l._)("p",null,(0,i.zw)(t.name)+" ("+(0,i.zw)(t.city)+")",1)]),(0,l._)("small",S,"조회 : "+(0,i.zw)(t.read_count),1),t.auth?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("img",{key:0,src:e.heart,style:{width:"28px"},onClick:(0,s.iM)((e=>U.likeBtn(t.id,t.auth,a)),["stop"])},null,8,D)),t.auth?((0,l.wg)(),(0,l.iD)("img",{key:1,src:e.heartFill,style:{width:"28px"},onClick:(0,s.iM)((e=>U.likeBtn(t.id,t.auth,a)),["stop"])},null,8,$)):(0,l.kq)("",!0)]),(0,l._)("small",z,(0,i.zw)(t.start_de)+" ~ "+(0,i.zw)(t.end_de),1),(0,l._)("div",null,[(0,l._)("small",L,[T,(0,l._)("span",B,(0,i.zw)(t.real_pay),1),I,(0,l._)("span",q,(0,i.zw)(t.sale_percent),1),(0,l.Uk)(" "+(0,i.zw)(t.sale_pay),1)])])])])],8,m)))),128))])])]),e.loading?((0,l.wg)(),(0,l.j4)(Z,{key:0})):(0,l.kq)("",!0),e.pageChk?((0,l.wg)(),(0,l.j4)(A,{key:1,pageListItem:e.pageListItem,onPageCurrent:U.pageCurr,pageTotal:e.pageTotal},null,8,["pageListItem","onPageCurrent","pageTotal"])):(0,l.kq)("",!0)],64)}var Z=a(360),A=a(5033),N=a(5414),j=a(8890),E={data:function(){return{pageListItem:9,page:0,travel_title:"",pageTotal:0,pageChk:!1,travel_list:[],loading:!1,heart:N,heartFill:j}},components:{Pagination:Z.Z,BlackBg:A.Z},created(){this.init()},methods:{init(){this.travelList()},travelList(){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};let t={page:this.page,travelAgencyTitleName:this.travel_title};this.loading=!0,this.$axios.get("/api/trip/agency-trip/triplist",1==this.$tokenCheck()?{headers:e,params:t}:{params:t}).then((e=>{"SUCCESS"==e.data.resultCode&&(console.log(e),this.pageTotal=e.data.result.totalElements,this.travel_list=[],e.data.result.content.forEach((e=>{let t=[];t.title=e.title,t.name=e.travelAgencyName,t.id=e.id,t.city=e.city,t.start_de=this.$splitDateHyphen(e.travel_start_at),t.end_de=this.$splitDateHyphen(e.travel_end_at),t.read_count=e.read_count,t.real_pay=e.real_paid+"원",t.sale_percent=e.sale_percent+"%",t.sale_pay=e.sale_paid+"원",t.auth=e.auth,null==e.filePath||""==e.filePath?t.img_chk=!1:(t.img_chk=!0,t.img=e.filePath),this.travel_list.push(t)})))})).catch((e=>{console.log(e),this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{this.pageChk=!0,this.loading=!1}))},pageCurr(e){this.page=e-1,this.travelList()},travelSearch(){this.page=0,this.pageChk=!1,this.travelList()},todoCclick(e){this.$router.push({path:"/TravelDetail",name:"travelDetail",query:{sn:e}})},likeBtn(e,t,a){if(this.$tokenCheck()){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};console.log(t),this.$axios.post("/api/trip/agency-trip/like/"+e,"",{headers:t}).then((e=>{"SUCCESS"==e.data.resultCode&&(this.travel_list[a].auth=!this.travel_list[a].auth)})).catch((()=>{this.$swal("","잠시후 다시 이용해주세요.","error")})).finally((()=>{}))}else this.$router.push("/login")}}},H=a(89);const M=(0,H.Z)(E,[["render",U]]);var V=M},8890:function(e,t,a){e.exports=a.p+"img/heart-fill.1e4c3599.svg"},5414:function(e,t,a){e.exports=a.p+"img/heart.22265d64.svg"}}]);
//# sourceMappingURL=70.c8af63b9.js.map