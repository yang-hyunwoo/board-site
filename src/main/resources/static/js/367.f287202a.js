"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[367],{6367:function(t,e,i){i.r(e),i.d(e,{default:function(){return y}});var n=i(3396),a=i(9242);const s={class:"input-group mb-3",style:{"margin-top":"1rem"}},o={style:{display:"flex","justify-content":"end"}};function r(t,e,i,r,l,c){const d=(0,n.up)("ToastEditor"),h=(0,n.up)("BlackBg");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",s,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=e=>t.title=e),class:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",placeholder:"제목을 입력해주세요."},null,512),[[a.nr,t.title]])]),t.test?((0,n.wg)(),(0,n.j4)(d,{key:0,onContentChange:c.editorContent,content:t.content},null,8,["onContentChange","content"])):(0,n.kq)("",!0),(0,n._)("div",o,[(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>c.regArticle&&c.regArticle(...t))},"저장")]),t.loading?((0,n.wg)(),(0,n.j4)(h,{key:1})):(0,n.kq)("",!0)],64)}var l=i(6171),c=i(4870),d={__name:"ToastModifyEditor",props:{content:{type:String,required:!0}},emits:["contentChange"],setup(t,{emit:e}){const a=t,s=(0,c.iH)(null),o=i(6265);return(0,n.bv)((()=>{const t=new l.ZP({el:s.value,height:"500px",initialValue:a.content,initialEditType:"wysiwyg",previewStyle:"tab",useDefaultHTMLSanitizer:!1,language:"ko-KR",usageStatistics:!1,hideModeSwitch:!0,hooks:{addImageBlobHook:(t,e)=>{const i={"content-type":"multipart/form-data"},n=new FormData;n.append("multiFile",t),o.post("/api/common/file-upload",n,{headers:i}).then((t=>{e("/api/common/image/"+t.data[0].fileId+"/"+t.data[0].fileChildId)})).catch((()=>{})).finally((()=>{}))}},events:{change:()=>e("contentChange",t.getHTML())},toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task"],["table","image","link"],["scrollSync"]]})})),(t,e)=>((0,n.wg)(),(0,n.iD)("div",{ref_key:"refEditor",ref:s},null,512))}};const h=d;var u=h,g=i(5033),p={data:function(){return{articleId:0,contentChange:"",title:"",loading:!1,content:"",test:!1}},components:{ToastEditor:u,BlackBg:g.Z},created(){this.articleId=this.$route.query.sn,console.log(this.$route.query.sn),this.init()},methods:{init(){this.validArticle()},validArticle(){this.loading=!0;const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.get("/api/trip/articles/valid/"+this.$route.query.sn,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.title=t.data.result.title,this.content=t.data.result.content,console.log(this.content))})).catch((t=>{this.$swal("",t.response.data.result,"error"),this.$router.push("/article")})).finally((()=>{this.pageChk=!0,this.loading=!1,this.test=!0}))},editorContent(t){this.contentChange=t},regArticle(){const t={Authorization:"Bearer "+sessionStorage.getItem("token")};var e=this.contentChange;if(e=e.replace(/&nbsp;/gi,""),e=e.replace(/<br>/gi,""),e=e.replace(/ /gi,""),this.$emptyChk(this.title))return void this.$swal("","제목을 입력해주세요.","warning");if("<p></p>"==e||" "==e)return void this.$swal("","내용을 입력해주세요.","warning");let i={title:this.title,content:this.contentChange};this.loading=!0,this.$axios.post("/api/trip/articles/"+this.articleId+"/form",i,{headers:t}).then((t=>{"SUCCESS"==t.data.resultCode&&(this.$swal("","저장되었습니다.","success"),this.$router.push({path:"/articleDetail",name:"articleDetail",query:{sn:this.articleId}}))})).catch((t=>{this.$swal("",t.response.data.result,"error")})).finally((()=>{this.loading=!1}))}}},m=i(89);const f=(0,m.Z)(p,[["render",r]]);var y=f},5033:function(t,e,i){i.d(e,{Z:function(){return d}});var n=i(3396);const a=(0,n._)("div",{class:"customdis"},[(0,n._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,n._)("span",{class:"visually-hidden"},"Loading...")])],-1),s=[a];function o(t,e,i,a,o,r){return(0,n.wg)(),(0,n.iD)("div",{class:"black-bg",onClick:e[0]||(e[0]=e=>t.$emit("close"))},s)}var r={},l=i(89);const c=(0,l.Z)(r,[["render",o]]);var d=c}}]);
//# sourceMappingURL=367.f287202a.js.map