"use strict";(self["webpackChunkboard_site_front"]=self["webpackChunkboard_site_front"]||[]).push([[949],{5033:function(e,t,s){s.d(t,{Z:function(){return c}});var i=s(3396);const a=(0,i._)("div",{class:"customdis"},[(0,i._)("div",{class:"spinner-border text-secondary",style:{width:"3rem",height:"3rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")])],-1),l=[a];function n(e,t,s,a,n,r){return(0,i.wg)(),(0,i.iD)("div",{class:"black-bg",onClick:t[0]||(t[0]=t=>e.$emit("close"))},l)}var r={},o=s(89);const d=(0,o.Z)(r,[["render",n]]);var c=d},2949:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var i=s(3396),a=s(7139),l=s(9242);const n=e=>((0,i.dD)("data-v-17e4b964"),e=e(),(0,i.Cn)(),e),r={class:"container"},o={class:"row"},d={class:"col-md-12"},c={class:"container"},h={class:"row"},u={class:"col-md-12"},p={id:"content",class:"content content-full-width"},m={class:"profile"},g={class:"profile-header"},_=n((()=>(0,i._)("div",{class:"profile-header-cover"},null,-1))),f={class:"profile-header-content"},b={class:"profile-header-img"},w=["src"],y={class:"profile-header-info"},k={class:"m-t-10 m-b-5"},v={class:"m-b-10"},C=n((()=>(0,i._)("label",{class:"file-label",for:"chooseFile"},"프로필 변경",-1))),$={class:"profile-content"},U={class:"tab-content p-0"},I={class:"tab-pane fade in active show",id:"profile-about"},S={class:"table-responsive"},x={class:"table table-profile"},B=n((()=>(0,i._)("thead",null,null,-1))),D={class:"highlight"},V=n((()=>(0,i._)("td",{class:"field"},"닉네임",-1))),q={class:"highlight"},z=n((()=>(0,i._)("td",{class:"field"},"휴대폰",-1))),F={key:0,class:"highlight"},N=n((()=>(0,i._)("td",{class:"field"},"비밀번호",-1))),j=(0,i.Uk)(" *비밀번호는 따로 저장 버튼을 눌러야 변경 가능 합니다."),M={class:"highlight"},T=n((()=>(0,i._)("td",{class:"field"},"성별",-1))),Z=n((()=>(0,i._)("label",{class:"form-check-label",for:"credit",style:{"margin-right":"1rem"}},"남자",-1))),A=n((()=>(0,i._)("label",{class:"form-check-label",for:"debit"},"여자",-1))),E={style:{display:"flex","justify-content":"end"}};function G(e,t,s,n,G,L){const P=(0,i.up)("BlackBg");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",r,[(0,i._)("div",o,[(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("div",h,[(0,i._)("div",u,[(0,i._)("div",p,[(0,i._)("div",m,[(0,i._)("div",g,[_,(0,i._)("div",f,[(0,i._)("div",b,[e.img_real?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.img,style:{width:"100%",height:"100%"}},null,8,w)):(0,i.kq)("",!0)]),(0,i._)("div",y,[(0,i._)("h4",k,(0,a.zw)(e.user_name),1),(0,i._)("p",v,(0,a.zw)(e.user_email),1),C,(0,i._)("input",{class:"file",id:"chooseFile",type:"file",onClick:t[0]||(t[0]=(...e)=>L.resetImageUploader&&L.resetImageUploader(...e)),onChange:t[1]||(t[1]=(...e)=>L.upload&&L.upload(...e)),accept:"image/png, image/jpeg, image/gif",ref:"imageUploader"},null,544)])])])]),(0,i._)("div",$,[(0,i._)("div",U,[(0,i._)("div",I,[(0,i._)("div",S,[(0,i._)("table",x,[B,(0,i._)("tbody",null,[(0,i._)("tr",D,[V,(0,i._)("td",null,[(0,i.wy)((0,i._)("input",{type:"text",style:{margin:"1px"},"onUpdate:modelValue":t[2]||(t[2]=t=>e.user_nickname=t)},null,512),[[l.nr,e.user_nickname]])])]),(0,i._)("tr",q,[z,(0,i._)("td",null,[(0,i.wy)((0,i._)("input",{type:"text",style:{margin:"1px"},"onUpdate:modelValue":t[3]||(t[3]=t=>e.phone_number=t)},null,512),[[l.nr,e.phone_number]])])]),""==e.loginType?((0,i.wg)(),(0,i.iD)("tr",F,[N,(0,i._)("td",null,[(0,i.wy)((0,i._)("input",{type:"password",style:{margin:"1px"},"onUpdate:modelValue":t[4]||(t[4]=t=>e.user_password=t)},null,512),[[l.nr,e.user_password]]),(0,i._)("button",{class:"btn btn-primary",style:{"margin-left":"1rem"},onClick:t[5]||(t[5]=(...e)=>L.passwordClick&&L.passwordClick(...e))},"저장"),j])])):(0,i.kq)("",!0),(0,i._)("tr",M,[T,(0,i._)("td",null,[(0,i.wy)((0,i._)("input",{id:"credit",name:"paymentMethod",type:"radio",class:"form-check-input",required:"",value:"M","onUpdate:modelValue":t[6]||(t[6]=t=>e.gender=t)},null,512),[[l.G2,e.gender]]),Z,(0,i.wy)((0,i._)("input",{id:"debit",name:"paymentMethod",type:"radio",class:"form-check-input",required:"",value:"F","onUpdate:modelValue":t[7]||(t[7]=t=>e.gender=t)},null,512),[[l.G2,e.gender]]),A])])])])]),(0,i._)("div",E,[(0,i._)("button",{class:"btn btn-primary width-150",onClick:t[8]||(t[8]=(...e)=>L.userUpd&&L.userUpd(...e))},"수정"),(0,i._)("button",{class:"btn btn-white btn-white-without-border width-150 m-l-5",onClick:t[9]||(t[9]=(...e)=>L.cancle&&L.cancle(...e))},"취소")])])])])])])])])])])]),e.loading?((0,i.wg)(),(0,i.j4)(P,{key:0})):(0,i.kq)("",!0)],64)}var L=s(5033),P={components:{BlackBg:L.Z},data:function(){return{loading:!1,user_name:"",user_email:"",user_nickname:"",phone_number:"",gender:"",img_real:!1,img:"",img_id:"",user_password:"",loginType:""}},created(){this.init()},methods:{init(){this.myPage()},myPage(){const e={Authorization:"Bearer "+sessionStorage.getItem("token")};this.loading=!0,this.$axios.get("/api/trip/users/my-page",{headers:e}).then((e=>{console.log(e),"SUCCESS"==e.data.resultCode&&(this.loginType=e.data.result.loginType,this.user_name=e.data.result.name,this.user_email=e.data.result.email,this.user_nickname=e.data.result.nickName,this.phone_number=e.data.result.phoneNumber,this.gender=e.data.result.gender,null==e.data.result.profileId||""==e.data.result.profileId?this.img_real=!1:this.img_real=!0,this.img_id=e.data.result.profileId,this.img="/api/common/image/"+e.data.result.profileId+"/1",console.log(e))})).catch((()=>{})).finally((()=>{this.loading=!1}))},passwordClick(){if(!this.pw_chk(this.user_password))return this.$swal("","하나 이상의 문자 , 숫자 , 특수 문자,최소 8자의 비밀번호가 필요합니다.","warning"),!1;let e={password:this.user_password};const t={Authorization:"Bearer "+sessionStorage.getItem("token")};this.$axios.post("/api/trip/users/change/password",e,{headers:t}).then((e=>{"SUCCESS"==e.data.resultCode&&this.$swal("","저장되었습니다.","success")})).catch((e=>{this.$swal("",e.response.data.result,"error")})).finally((()=>{this.loading=!1}))},pw_chk(e){return this.$passwordValidation(e)},resetImageUploader(){this.$refs.imageUploader.value=""},userUpd(){if(console.log(this.img_id),this.$emptyChk(this.user_nickname))return this.$swal("","닉네임을 확인해주세요.","warning"),!1;if(this.$emptyChk(this.phone_number))return this.$swal("","휴대번호를 확인해주세요.","warning"),!1;if(this.$emptyChk(this.gender))return this.$swal("","성별을 확인해주세요.","warning"),!1;const e={Authorization:"Bearer "+sessionStorage.getItem("token")};let t={nickName:this.user_nickname,phoneNumber:this.phone_number,gender:this.gender,profileId:this.img_id};this.$axios.post("/api/trip/users/change/other",t,{headers:e}).then((e=>{"SUCCESS"==e.data.resultCode&&this.$swal("","저장되었습니다.","success")})).catch((e=>{this.$swal("",e.response.data.result,"error")})).finally((()=>{this.loading=!1,this.myPage()}))},cancle(){this.$router.push("/")},upload(e){const t=e.target.files[0];URL.createObjectURL(t);const s={"content-type":"multipart/form-data"},i=new FormData;i.append("multiFile",t),this.$axios.post("/api/common/file-upload",i,{headers:s}).then((e=>{this.img="/api/common/image/"+e.data[0].fileId+"/1",this.img_id=e.data[0].fileId,console.log(e)})).catch((()=>{})).finally((()=>{}))}},watch:{phone_number(){this.phone_number=this.phone_number.replace(/[^0-9]/g,""),this.phone_number=this.$phoneNumberGetMask(this.phone_number)}}},R=s(89);const H=(0,R.Z)(P,[["render",G],["__scopeId","data-v-17e4b964"]]);var O=H}}]);
//# sourceMappingURL=949.f0418529.js.map