{"version":3,"file":"js/619.af4dc6e5.js","mappings":"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","sources":["webpack://board-site-front/./src/components/travel/TravelPaymentIng.vue","webpack://board-site-front/./src/components/travel/TravelPaymentIng.vue?f64e"],"sourcesContent":["<template>\r\n\r\n <div class=\"py-4 text-center\">\r\n      <!-- <img class=\"d-block mx-auto mb-4\" src=\"/docs/5.2/assets/brand/bootstrap-logo.svg\" alt=\"\" width=\"72\" height=\"57\"> -->\r\n      <img v-if=\"img_chk\" :src=\"img\"  width=\"200\" height=\"200\">\r\n      <h2>{{travel_name}}</h2>\r\n    </div>\r\n    <div>\r\n    <div class=\"row g-5 juscustom\" >\r\n      <div class=\"col-md-7 col-lg-8\" style=\"margin-left:0.5rem;\">\r\n\r\n          <div class=\"row g-3\">\r\n            <div class=\"col-11\">\r\n             <label for=\"email\" class=\"form-label\" >이름 </label>\r\n              <input type=\"email\" v-model=\"user_name\" class=\"form-control\"  placeholder=\"홍길동\" >\r\n            </div>\r\n\r\n            <div class=\"col-11\">\r\n              <label for=\"email\" class=\"form-label\">Email</label>\r\n              <input type=\"email\" v-model=\"email\" class=\"form-control\" id=\"email\" placeholder=\"you@example.com\" >\r\n            </div>\r\n            <div class=\"col-11\">\r\n                인원 :    <button @click=\"minus\" class=\"btn-cl\" style=\"font-size:20px;\">-</button><input type=number name=amount v-model=\"total_count\" style=\"width:8%;\"><button class=\"btn-cl\" style=\"font-size:20px;\" @click=\"plus\">+</button>\r\n                </div>\r\n          </div>\r\n\r\n          <hr class=\"my-4\">\r\n            \r\n          <div class=\"form-check\">\r\n                주문 금액 :{{$numberWithCommas(init_sale_pay)}}원\r\n          </div>\r\n           <hr class=\"my-4\">\r\n            <div class=\"form-check\">\r\n            <input type=\"checkbox\" class=\"form-check-input\" id=\"save-info\" v-model=\"pay_chk\">\r\n            <label class=\"form-check-label\" for=\"save-info\">결제에 동의</label>\r\n          </div>\r\n          <br>\r\n          <button class=\"w-100 btn btn-primary btn-lg\" @click=\"iamport\">결제하기</button>\r\n\r\n    </div>\r\n    </div>\r\n</div>\r\n <BlackBg v-if=\"loading\"></BlackBg>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata: function () {\r\n    return {\r\n        user_name : \"\",\r\n        email : \"\",\r\n        total_count: 1,\r\n        travel_name: \"\",\r\n        travel_list_id : this.$route.query.sn,\r\n        travel_id : \"\",\r\n        real_pay : 0 ,\r\n        sale_pay : 0,\r\n        init_sale_pay : 0,\r\n        pay_chk:false,\r\n        loading:false,\r\n        person_count : 0,\r\n        person_max_count : 0,\r\n        img_chk:false,\r\n    }\r\n  },\r\n\r\n  created(){\r\n    if(this.travel_list_id == null ||this.travel_list_id== undefined || this.travel_list_id== \"null\" ||this.travel_list_id == \"undefined\") {\r\n        history.back(-1);\r\n    }\r\n    this.init();\r\n\r\n  },\r\n\r\n  methods: {\r\n    init() {\r\n        this.traveDetail();\r\n    },\r\n\r\n    traveDetail() {\r\n    this.$axios.get(process.env.VUE_APP_TRAVEL_DETAIL+this.travel_list_id).then((res) =>{\r\n          if(res.data.resultCode==\"SUCCESS\"){\r\n            let data = res.data.result ; \r\n            this.travel_name    = data.title ;\r\n            this.real_pay       = data.real_paid ;\r\n            this.sale_pay       = data.sale_paid ;\r\n            this.init_sale_pay  = data.sale_paid ;\r\n            this.travel_id      = data.travel_agency_id ;\r\n            this.person_max_count = data.person_max_count;\r\n            if(data.thumnbnailFileId==null){\r\n              this.img_chk = false;\r\n            } else{\r\n              this.img_chk = true;\r\n              this.img = process.env.VUE_APP_FILE_IMAGE_THUMB_READ+data.thumnbnailFileId+\"/1\";\r\n            }\r\n          }\r\n        }).catch((error) => {\r\n          console.log(error.response.data.result);\r\n             this.$swal('',error.response.data.result,'error');\r\n             this.$router.push(\"/travelList\");\r\n        }).finally(() => {\r\n        });\r\n    },\r\n\r\n    iamport() {\r\n        if(this.pay_chk) {\r\n          this.$axios.get(process.env.VUE_APP_TRAVEL_DETAIL+this.travel_list_id).then((res) =>{\r\n              if(res.data.resultCode==\"SUCCESS\"){\r\n                let data = res.data.result ; \r\n                this.person_count = data.person_count;\r\n              }\r\n          }).catch(() => {\r\n              this.$swal('','잠시후 다시 이용해주세요.','error');\r\n          }).finally(() => {\r\n          });\r\n              let parameter = {\r\n              \"operland\" : \"plus\",\r\n              \"count\"  : this.total_count\r\n              }\r\n              console.log(this.person_count);\r\n              console.log(this.total_count);\r\n              console.log(this.person_max_count);\r\n          if(this.person_count+this.total_count <= this.person_max_count) {\r\n              this.$axios.get(process.env.VUE_APP_UPDATE_PERSON+this.travel_list_id,{params:parameter}).then(() =>{\r\n              }).catch(() => {\r\n                      this.$swal('','잠시후 다시 이용해주세요.','error');\r\n              }).finally(() => {\r\n              });\r\n\r\n                var IMP = window.IMP;\r\n                IMP.init(process.env.VUE_APP_IAMPORT);\r\n                IMP.request_pay({ // param\r\n                        pg: \"html5_inicis\",\r\n                        pay_method: \"card\",\r\n                        name: this.travel_name,\r\n                        amount: this.init_sale_pay,\r\n                        buyer_email: this.email,\r\n                        buyer_name: this.user_name,\r\n                }, rsp => { // callback\r\n                    if (rsp.success) {\r\n                          const headers = { 'Authorization': 'Bearer ' + sessionStorage.getItem(\"token\")}\r\n                let param = {\r\n                  \"travelAgencyId\": this.travel_id,\r\n                  \"travelAgencyListId\" : this.travel_list_id,\r\n                  \"merchantUid\"  : rsp.merchant_uid,\r\n                  \"impUid\" : rsp.imp_uid,\r\n                  \"payEmail\" : this.email,\r\n                  \"payName\" : this.user_name,\r\n                  \"paid\"    : rsp.paid_amount,\r\n                  \"personCount\" : this.total_count\r\n                }\r\n                  this.loading = true;\r\n                  this.$axios.post(process.env.VUE_APP_TRAVEL_PAY ,param,{headers}).then((res) =>{\r\n                        if(!res.data.result) {\r\n                            this.$router.push(\"/travelPaymentSuccess\");\r\n                        } else {\r\n                            this.$swal('스크립트 변조',\"결제 금액이 다릅니다.\\n 환불 관련은 관리자에게 문의 하세요.\",\"error\");\r\n                        }\r\n                    }).catch((error) => {\r\n                        this.$swal('',error.response.data.result,'error');\r\n                    }).finally(() => {\r\n                        this.loading = false;\r\n                    });\r\n                    } else {\r\n                        //결제 실패\r\n                        let parameter_minus = {\r\n                          \"operland\" : \"minus\",\r\n                          \"count\"  : this.total_count\r\n                        }\r\n                      this.$axios.get(process.env.VUE_APP_UPDATE_PERSON+this.travel_list_id,{params:parameter_minus}).then(() =>{\r\n                        }).catch(() => {\r\n                                this.$swal('','잠시후 다시 이용해주세요.','error');\r\n                        }).finally(() => {\r\n                        });\r\n                    }\r\n                });\r\n              } else {\r\n                this.$swal('','마감 되었습니다.','info')\r\n              }\r\n   \r\n        } else {\r\n            this.$swal('','결제 동의에 체크 해주세요.','waring')\r\n        }\r\n    },\r\n\r\n    minus() {\r\n        this.total_count--;\r\n    },\r\n\r\n    plus() {\r\n        this.total_count++;\r\n    }\r\n\r\n  },\r\n\r\nwatch: {\r\n    total_count(){\r\n          if(this.total_count < 1){\r\n             this.$swal('','1이하로는 입력할수 없습니다.','error');\r\n             this.total_count=1;\r\n            return ;\r\n          }\r\n          if(this.total_count >100) {\r\n             this.$swal('','100이상로는 입력할수 없습니다.','error');\r\n             this.total_count = 1;\r\n             return ;\r\n          }\r\n            this.init_sale_pay   = (this.sale_pay * this.total_count);\r\n    },\r\n}\r\n\r\n\r\n}\r\n</script>\r\n<style scoped>\r\n .juscustom{\r\n    justify-content: center;\r\n    /* margin-left:0.rem; */\r\n}\r\n.btn-cl {\r\n    background-color: rgba(0,0,0,0);\r\n    color: skyblue;\r\n    border: 0px ;\r\n    width : 15%;\r\n} \r\n.col-11 {\r\n    margin-bottom: 0.8rem;\r\n}\r\n.row {\r\n    --bs-gutter-x : 0 !important;\r\n    --bs-gutter-y : 0 !important;\r\n}\r\n.deco{\r\n  text-decoration: line-through;\r\n}\r\n\r\n</style>","import { render } from \"./TravelPaymentIng.vue?vue&type=template&id=53bf8f96&scoped=true\"\nimport script from \"./TravelPaymentIng.vue?vue&type=script&lang=js\"\nexport * from \"./TravelPaymentIng.vue?vue&type=script&lang=js\"\n\nimport \"./TravelPaymentIng.vue?vue&type=style&index=0&id=53bf8f96&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Git_project\\\\board-site\\\\front-end\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53bf8f96\"]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","for","_ctx","_createElementBlock","src","width","height","_toDisplayString","_hoisted_7","type","$event","placeholder","_hoisted_9","id","onClick","$options","name","_hoisted_12","_hoisted_14","_hoisted_16","_hoisted_17","_createBlock","_component_BlackBg","key","data","user_name","email","total_count","travel_name","travel_list_id","this","$route","query","sn","travel_id","real_pay","sale_pay","init_sale_pay","pay_chk","loading","person_count","person_max_count","img_chk","created","undefined","history","back","init","methods","traveDetail","$axios","get","process","then","res","resultCode","result","title","real_paid","sale_paid","travel_agency_id","thumnbnailFileId","img","catch","error","console","log","response","$swal","$router","push","finally","iamport","parameter","params","IMP","window","request_pay","pg","pay_method","amount","buyer_email","buyer_name","rsp","success","headers","sessionStorage","getItem","param","merchant_uid","imp_uid","paid_amount","post","parameter_minus","minus","plus","watch","__exports__","render"],"sourceRoot":""}